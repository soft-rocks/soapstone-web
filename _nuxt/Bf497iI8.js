import{m as k,t as h,w as _,u as q,b as B,d as E,e as F,f as I}from"./B5OjAVdo.js";import{x as m,e as $,h as C,i as y,aC as x,Q as O,l as V,B as W,E as j}from"./Bj89Qxwg.js";function G(e={}){const{inheritAttrs:t=!0}=e,u=m(),n=$({setup(a,{slots:r}){return()=>{u.value=r.default}}}),o=$({inheritAttrs:t,props:e.props,setup(a,{attrs:r,slots:f}){return()=>{var v;if(!u.value)throw new Error("[VueUse] Failed to find the definition of reusable template");const s=(v=u.value)===null||v===void 0?void 0:v.call(u,{...e.props==null?z(r):a,$slots:f});return t&&s?.length===1?s[0]:s}}});return k({define:n,reuse:o},[n,o])}function z(e){const t={};for(const u in e)t[B(u)]=e[u];return t}const K=E?window:void 0,w=E?window.navigator:void 0;function N(e){var t;const u=y(e);return(t=u?.$el)!==null&&t!==void 0?t:u}function M(...e){const t=(n,o,a,r)=>(n.addEventListener(o,a,r),()=>n.removeEventListener(o,a,r)),u=C(()=>{const n=h(y(e[0])).filter(o=>o!=null);return n.every(o=>typeof o!="string")?n:void 0});return _(()=>{var n,o;return[(n=(o=u.value)===null||o===void 0?void 0:o.map(a=>N(a)))!==null&&n!==void 0?n:[K].filter(a=>a!=null),h(y(u.value?e[1]:e[0])),h(W(u.value?e[2]:e[1])),y(u.value?e[3]:e[2])]},([n,o,a,r],f,v)=>{if(!n?.length||!o?.length||!a?.length)return;const s=I(r)?{...r}:r,c=n.flatMap(d=>o.flatMap(g=>a.map(b=>t(d,g,b,s))));v(()=>{c.forEach(d=>d())})},{flush:"post"})}function Q(){const e=m(!1),t=V();return t&&O(()=>{e.value=!0},t),e}function A(e){const t=Q();return C(()=>(t.value,!!e()))}function T(e,t={}){const{controls:u=!1,navigator:n=w}=t,o=A(()=>n&&"permissions"in n),a=m(),r=typeof e=="string"?{name:e}:e,f=m(),v=()=>{var c,d;f.value=(c=(d=a.value)===null||d===void 0?void 0:d.state)!==null&&c!==void 0?c:"prompt"};M(a,"change",v,{passive:!0});const s=F(async()=>{if(o.value){if(!a.value)try{a.value=await n.permissions.query(r)}catch{a.value=void 0}finally{v()}if(u)return j(a.value)}});return s(),u?{state:f,isSupported:o,query:s}:f}function H(e={}){const{navigator:t=w,read:u=!1,source:n,copiedDuring:o=1500,legacy:a=!1}=e,r=A(()=>t&&"clipboard"in t),f=T("clipboard-read"),v=T("clipboard-write"),s=C(()=>r.value||a),c=m(""),d=m(!1),g=q(()=>d.value=!1,o,{immediate:!1});async function b(){let i=!(r.value&&S(f.value));if(!i)try{c.value=await t.clipboard.readText()}catch{i=!0}i&&(c.value=R())}s.value&&u&&M(["copy","cut"],b,{passive:!0});async function L(i=y(n)){if(s.value&&i!=null){let l=!(r.value&&S(v.value));if(!l)try{await t.clipboard.writeText(i)}catch{l=!0}l&&P(i),c.value=i,d.value=!0,g.start()}}function P(i){const l=document.createElement("textarea");l.value=i,l.style.position="absolute",l.style.opacity="0",l.setAttribute("readonly",""),document.body.appendChild(l),l.select(),document.execCommand("copy"),l.remove()}function R(){var i,l,p;return(i=(l=document)===null||l===void 0||(p=l.getSelection)===null||p===void 0||(p=p.call(l))===null||p===void 0?void 0:p.toString())!==null&&i!==void 0?i:""}function S(i){return i==="granted"||i==="prompt"}return{isSupported:s,text:x(c),copied:x(d),copy:L}}export{H as a,G as c,M as u};
